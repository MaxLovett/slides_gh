---
title: "Hello, R!"
subtitle: "Dr. Hu's R Workshop Series I"
author: "Yue Hu<br>Department of Political Science<br>Tsinghua University"
output:
  xaringan::moon_reader:
    css: [middlebury, "styles.css", "font-awesome-4.7.0/css/font-awesome.css", "logo.css", "font.css"]
    mathjax: "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML"
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>`
---

# R Workshop Series

* **R Basic**
* Data Manipulation
* Quantitative Analysis
* Multilevel Analysis
* Data Visualization
* Geographic Data Visualization
* Professionalization

---

# How to Get the Slides?

All the slides are presented in my personal webpage:

1. Opening [https:\\sammo3182.github.io](https:\\sammo3182.github.io) at any browser you like (even with your phone);
1. Search for "Hello,R";
1. Click the hyperlink "slides."

---

# A test 

1. What can you do with R?
1. Why R, not STATA?
1. What does this mean? 

```{r test, eval = FALSE}
mtcars[1, 2]

m1 <- lm(socialCapital ~ interTrust + happiness * participation, data = wvs)
```



---

# What's R?

* **Object-oriented** system: Put things in to boxes and carry around.
* Created for **statistics**

---

class: middle,bottom,small

# What Can R Do?

--
* Doing statistics and data manipulations.

--
* Crunching small, middle, or big sizes of data.

--
* Edit codes from Excel, STATA, Python, C++, ...

--
* Scrape data from texts, websites, databases, pdf...

--
* Create webpages (see, e.g., [`blogdown`](https://bookdown.org/yihui/blogdown/).)

--
* Write an academic article, a book, or a dissertation in html, pdf, or docx (see e.g., [`bookdown`](https://bookdown.org/home/).)

--
* Create presentation slides in pdf (as LaTex beamer), html (as Markdown), or ppt (as PowerPoint).

--
* ......

---

# Why R?

.pull-left[

* FREE!!!

* Developing
    + `r nrow(available.packages())`+ packages.
    + Package and algorthem everyday.

]

--

.pull-right[

* Popular

.center[<img src="images/rank.jpeg" height = 300 />]
.Small[[Source:  IEEE Spectrum ranking](https://spectrum.ieee.org/computing/software/the-2017-top-programming-languages)]

]

---

# Ah, STATA? 

It's like choosing an OS...Mac or PC?

.pull-left[

### STATA

<img src="images/mac.jpg" height = 300 />

] 

.pull-right[

### R

<img src="images/pc.png" height = 300 />

]

---

## So, if you choose R,

Be prepare....

--

.center[<img src="images/pc2weeks.gif" height = 400 />]


---

.pull-left[
### R

#### Advantages

* Updating
* Flexible

#### Inconvenience

* Linear-algebraic calculation
* Programming

]

.pull-right[
### STATA

#### Advantages

* Stable
* Reliable

#### Inconvenience

* Use what you get
* Poor visualization
* EXPENSIVE: SE?
    + Annual:	$235 student/**year**

]


---

# Hey, Python?

.center[<img src="images/rank2.jpeg" height = 200 />]

--

* R vs. Python: "The war that never ends..."

---

.pull-left[
### R

#### Advantages

* Statistics
* Visualization

#### Inconvenience

* Large-size (> 1G) data
* Unreadable codes (in the past)
]

.pull-right[
### Python

#### Advantages

* Machine learning
* Big data

#### Inconvenience

* Setting up & 2.7 vs. 3.5?
* Outcomes?

]

---

# Let's start our journey!

.center[<img src="images/begin.gif" height = 300 />]

---

# Program Installation

.pull-left[
### Core program

[<img src="images/Rlogo.png" height = 300 />](https://www.r-project.org/)

]

--

.pull-right[
### Graphic User Interfaces (GUI)

[<img src="images/rstudio.jpg" height = 300 />](https://www.rstudio.com/)

]

---

# Package?


<img src="images/apps.jpeg" height = 400 />


---

# Package Installation

* Installing:

```{r installPg, eval=FALSE}
install.packages(<package name>)
devtools::install_github("<repositary/package name>")
```

--

* Using:

```{r usingPg, eval=FALSE}
library(<package name>)
require(<package name>)
```

---

## First-Time Using

Set the working directory! Set the working directory! Set the working directory!

.pull-left[

```{r eval = FALSE}
# Find
getwd() 

# Reset
setwd("./rworkshop") 
```
    
]

--

.pull-right[

<img src=images/wdSetting.gif height = "300"/>


]

---

# Terminology

--

### Matrix

.pull-left[

<img src=images/matrix.gif height = "300"/>

]

--

.pull-right[

```{r}
A <- matrix(-8:7, ncol = 4)
A
A[2, 3]
```

]

---

### Vector: 

```{r}
# Numeric
c(1, 2, 3) # Integer
c(1.5, -2.34, NA) #Double
# Factor
factor(c(1, 2, 2, 3), labels = c("Apple", "Pear", "Orange"))

```

---

```{r}
# Character
c("R is hard.", "But I can learn.")

# Time
as.POSIXlt("2005-10-21 18:47:22")

# Logic
c(TRUE, TRUE, FALSE)
```


---

### Data frame

```{r dfEG, echo=FALSE}
knitr::kable(head(mtcars[1:3, 1:4]), format='html')
```

--

.pull-left[
```{r}
mtcars[1,1]
```
]

--

.pull-right[
```{r}
mtcars$mpg[1]
```

]

---

### Array

A multi-dimension matrix

```{r}
array(-9:9, dim = c(3,3,2)) 
# three dimensions with 3, 3, and 2 elements in each dimension.
```

---

### List

A series of everything.

```{r}
aList <- list(c(1:5), letters[1:5])
aList
aList[[2]]
```

---

## Functions

.center[<img src=images/handShadow.gif height = "250"/>]

--

```{r}
light <- function(finger){
  {{shadow <- finger + 5}}
}

handShadow <- light(finger = 3)
handShadow
```

---

## Data Input and Output


### Build-in functions

```{r eval=FALSE}
load("<FileName>.RData")

df_rds <- readRDS("<FileName>.rds")
df_txt <- read.table("<FileName>.txt")
df_csv <- read.csv("<FileName>.csv")

```


---

### Package functions

```{r eval=FALSE}
# SPSS, Stata, SAS
library(haven)
df_spss <- read_spss("<FileName>.sav")
df_stata <- read_dta("<FileName>.dta") 
df_sas <- read_sas("<FileName>.sas7bdat")  

# Excel sheets
library(readxl)
df_excel <- read_excel("<FileName>.xls")
df_excel2 <- read_excel("<FileName>.xlsx") 

# JavaScript Object Notation 
library(rjson)
df_json <- fromJSON(file = "<FileName>.json" )

# XML/Html
df_xml <- xmlTreeParse("<url>")
df_html <- readHTMLTable(url, which=3)

```



---

## Data output

* Save single object in a `.rds` file

```{r eval = F}
saveRDS(object, file = "./Data/mydata.Rdata")
```

* Save multip objects into an R dataset (`.RData`/`.rda`) 

```{r eval = F}
save(object, file = "./Data/mydata.Rdata")
```

* Save multip objects into a CSV sheet `.csv`

```{r eval = F}
write.csv(object, file = "mydata.csv")
```


---

## Programming Basics: Math

```{r eval=FALSE}
# basic math
x + (1 - 2) * 3 / 4

# advanced math
x^2;sqrt(x);log(x);exp(x)

# matrix algebra
z <- matrix(1:4, ncol = 2)
z + z - z
z %*% z  # inner mul<span style="color:purple">Tip</span>lication 
z %o% z  # outter mul<span style="color:purple">Tip</span>lication

# logical evaluation
x == z; x != Z
x & z; x | z
x > z; x <= z
```


---

## Naming Objects

* Don't start with numbers (WRONG: `1stday`)

--

* No special signs except for `.` and `-` (WRONG: `M&M`)

--

* Case sensitivity (`X != x`)

--

* Don't overwrite the build-in functions unless necessary (DON'T: `list <- c(1:5)`)


---

## Last Words

* Being aware of the learning curve

.center[<img src=images/LearningCurve.png height="400"/>]
.small[[Source: NYU Data Service](https://sites.google.com/a/nyu.edu/statistical-software-guide/summary)]

---

* Preparing for unexpected troubles

```{r}
testDF <- data.frame(x = c(1, 1, 1, NA, 4, 4),
                     y = c(2, 2, 2, 2, 2, 2))
testDF
```

--

```{r eval = FALSE}
testDF$x[testDF$x < 4] <- testDF$y[testDF$x < 4]
```

```
Error in testDF$x[testDF$x < 4] <- testDF$y[testDF$x < 4] * 0 : 
  NAs are not allowed in subscripted assignments
```

--

```{r}
testDF$x <- ifelse(testDF$x < 4, testDF$y, testDF$x)
testDF$x 
```

---

* Sufficiently using online sources

.center[<img src=images/search.png height="400"/>]

---

class: inverse, bottom

background-image: url(http://rescuethepresent.net/tomandjerry/files/2016/05/16-thanks.gif)
background-position: 50% 50%
background-size: 100%

# Call It for the Day!