<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Probability Theory</title>
    <meta charset="utf-8" />
    <meta name="author" content="Yue Hu" />
    <script src="03_probability_files/htmlwidgets-1.3/htmlwidgets.js"></script>
    <script src="03_probability_files/viz-0.3/viz.js"></script>
    <link href="03_probability_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="03_probability_files/grViz-binding-1.0.1/grViz.js"></script>
    <link rel="stylesheet" href="..\..\..\css\zh-CN_custom.css" type="text/css" />
    <link rel="stylesheet" href="..\..\..\css\styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Probability Theory
## Analysis of Political Data (70700173)
### Yue Hu
### Political Science, Tsinghua University

---


## What's Probability

* Determinist event: P = 0/1

--

* Probabilist event: [0, 1]

---

## Perspective

* Classic ("objective") view: Coin has two sides, balance means `\(Pr(head) = 0.5\)`.

--

* Relative frequency view: `\({\displaystyle \lim_{n\to \infty}f(x)/n}\)`
    + Random sample (the larger the better)

--

* Subjective view: Bayesian, based on beliefs (prior), game theory

---

## Sample space

Space of all possible outcomes

--

Rules:

1. `\(\sum P = 1\)`
1. All of the probability constitute the probability distribution
1. For all event in the space, `\(P(E) + P(\tilde E) = 1\)`

---

## Sample point method

Get the probability of the event

--

1. Define experiment event
1. Define sample space
1. Assign probabilities, `\(P(E_i) \geq 0, \sum P(E_i) = 1.\)`
1. Define event of interest, A
1. Find P(A) by summing probability of A.

---

## Event composition method

A method used to determine the probabilities by the application of multiplicative and additive rules of probability.

--

e.g., `\(E_1\)`: m outcomes, `\(E_2\)`: n outcomes, therefore there are `\(m\times n\)` possible outcome for `\(E_1 E_2\)`. 

--

e.g., A car dealer has 6 models, 8 colors, and 3 financial plans. How many package? 6 * 8 * 3.

---

## Permutation and Combination

Ordered: `\(P(n, r) = \frac{n!}{(n - r)!}.\)`

Order doesn't matter: `\({n \choose r} = \frac{n!}{r!(n - r)!}.\)`

---

## Sampling w./w.o. replacements

W.o. means once picked, it won't be sampled again. 

--

When the population is infinite, or extremely large, then thereâ€™s little difference between sampling with and without replacement). 

---

When the population is finite, the variability of our sample is actually less than expected

Apply a finite population correction to account for this greater efficiency in the sampling process. 

$$ FPC = \sqrt{\frac{N - n}{N - 1}}$$

---

e.g., Through a dice for five times: 

w. replacement: `\(6^5\)`

w.o. replacement: `\(P(6, 5) = \frac{6!}{(6 - 5)!}.\)` (n! factorial)

--

Q. Is survey sampling a w. or w.o. sampling? 

???

w.o.

---

## Joint, marginal, conditional distributions

* Multinomial: `\(P(n_1, n_2,\dots, n_i) = {n\bullet\choose n1, n2, \dots, n_i}\Pi \pi_i^n.\)`
    + Binomial: `\(P(n_1, n_2) = {n\bullet\choose n_1}\pi_1^{n_1}(1 - \pi_1)^{n_2}\)`

--

Marginal and joint totals: 

`$$\begin{align} 
n_{i\bullet} =&amp; \sum_j n_{ij}; n_{\bullet j} = \sum_i n_{ij}; \\
n_{\bullet\bullet} =&amp; \sum\sum n_{ij}.
\end{align}$$`


---

## Independent event

`\(P(X\cap Y) = P(X)P(Y); P(Y|X) = P(X).\)`

Such event's probability is: 

* Population: `\(\pi_i = n_i/N\)`
* Sample: `\(\hat{\pi_i} = n_i/n_{\bullet}.\)`

---

Marginal distribution: 

`$$\begin{align}\pi_{i\bullet} =&amp; \sum_j \pi_{ij}, \hat{\pi_{i\bullet}} =  n_{i\bullet}/n_{\bullet\bullet}; \\
\pi_{\bullet j} =&amp; \sum_i \pi_{ij}, \hat{\pi_{\bullet j}} =  n_{\bullet j}/n_{\bullet\bullet}.\end{align}$$`

Joint distribution: `\(\pi_{\bullet\bullet} = \sum\sum \pi_{ij} = 1.\)`

Conditional distribution: `\(P(i|j) = \pi_{ij} / \pi_{\bullet j}; \hat{\pi_{i|j}} = n_{ij}/n_{\bullet j}\)`

---

class: small

e.g., A survey asked respondents if they agreed that kids under 18 can take taxi without parents' permission. 

| Gender 	| Yes 	| No 	| Total 	|
|--------	|-----	|----	|-------	|
| Male   	| 5   	| 12 	| 17    	|
| Female 	| 6   	| 5  	| 11    	|
| Total  	| 11  	| 17 	| 28    	|

What's the probability for each event

--

| Gender 	| Yes  	| No    	|
|--------	|------	|-------	|
| Male   	| 5/28 	| 12/28 	|
| Female 	| 6/28 	| 5/28  	|

---

e.g., A survey asked respondents if they agreed that kids under 18 can take taxi without parents' permission. 

| Gender 	| Yes 	| No 	| Total 	|
|--------	|-----	|----	|-------	|
| Male   	| 5   	| 12 	| 17    	|
| Female 	| 6   	| 5  	| 11    	|
| Total  	| 11  	| 17 	| 28    	|


Conditional probability P(Y|M)

--

Conditional: `\(P(Y|M) = 5/17\)`

---

e.g., A survey asked respondents if they agreed that kids under 18 can take taxi without parents' permission. 

| Gender 	| Yes 	| No 	| Total 	|
|--------	|-----	|----	|-------	|
| Male   	| 5   	| 12 	| 17    	|
| Female 	| 6   	| 5  	| 11    	|
| Total  	| 11  	| 17 	| 28    	|


Are gender and agreement on taxi independent? 

--

`\(P(MY) = 11/28 * 17/28 \neq 5/28\)` 

???

`\(11/28 * 17/28\)` is the expected value for independence, then `\(\chi^2 = \sum(\frac{Observation - Expected}{Expected})^2.\)`

---

class: small

## Relative Risk

* `\(\hat{\pi}_{1|1}/\hat{\pi}_{1|2} = \frac{n_{11}/n_{\bullet 1}}{n_{12}/n_{\bullet 2}}\)`

e.g., A traffic bureau tried to test whether seat belt can reduce the fatal ratio. Here's the counts:

| Seatbelt 	| Fatal 	| Nonfatal 	|
|----------	|-------	|----------	|
| Yes      	| 1601  	| 162527   	|
| No       	| 510   	| 412368   	|

`\(Risk_{fatal} = \frac{1601/(1601 + 162527)}{510/(510 + 412368)} = 7.9\)`

???

That is, when people have seatbelt, they are 7.9 more times to die in a fatal accident than a non-fatal one.

---

## Odds Ratio

`$$\begin{align}
O_{12} =&amp; \frac{\pi_{1|1}/\pi_{1|2}}{\pi_{2|1}/\pi_{2|2}} \\
 =&amp; \frac{n_{11}/n_{12}}{n_{21}/n_{22}} \\
 =&amp; n_{11}n_{22}/n_{21}n_{12}
\end{align}$$`

--

* Log odds: `\(ln(O_{12})\)`

???

For binary, using `\(log(O_{12})\)`, i.e., "logistic" transformation of odds, a.k.a., "logit"

---

e.g., A traffic bureau tried to test whether seat belt can reduce the fatal ratio. Here's the counts:

| Seatbelt 	| Fatal 	| Nonfatal 	|
|----------	|-------	|----------	|
| Yes      	| 1601  	| 162527   	|
| No       	| 510   	| 412368   	|

`\(O_{fatal} = \frac{1601/510}{162527/412368}\)`

--

If independent, then log odds = 0.

---

RR vs. OR

.center[&lt;img src="images/rrOr.png" height = 300 /&gt;]

* For rare cases, both ok.
* For common cases, RR is better.

---

## Compound events

Event G and H

* Union: G&amp;cup;H = `\(\{S_i: S_i\in G\ or\ S_i\in H\}\)`
    + P(G&amp;cup;H) = P(G) + P(H) - P(G)&amp;cap;P(H).
* Intersection: G&amp;cap;H = `\(\{S_i: S_i\in G\ and\ S_i\in H\}\)`
* Exclusive: G&amp;cap;H = &amp;empty;
* Complement: J &amp;sub; -G &amp;cap; H
* Conditional: `\(P(H|G) = \frac{P(G\cap H)}{P(G)}\)`
* Independent: P(H|G) = P(H); P(G&amp;cap;H) = P(G)P(H)

---

## Bayes' Theorem:

$$
`\begin{aligned}
P(A|B)P(B) =&amp; P(B|A)P(A) = P(A\cap B)\\
             P(A|B)=&amp; \frac{P(B|A)P(A)}{P(B)}\\
                   =&amp; \frac{P(B|A)P(A)}{P(B|A)P(B) + P(B|\tilde A)P(\tilde A)}
\end{aligned}`
$$

--

1. Conjugate prior: posterior distribution = prior distribution
1. Cromwell's rule: if a region of the parameter space has 0 prior probability, then it also has 0 posterior probability. 
 
---

class: small

e.g.1: Known in used car deals, 30% of the cars were faulty. When people bring the cars to the mechanic, the mechanic can identify largely 90% faulty car faulty and 80% good car good. Given this information, what's the probability that a car is faulty if a mechanic said it is?

--

.left-column[
<div id="htmlwidget-e5bcc9c9a041b59f1a5c" style="width:504px;height:60%;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5bcc9c9a041b59f1a5c">{"x":{"diagram":"\ndigraph usedCar {\n\n  # a \"graph\" statement\n  graph [overlap = true, fontsize = 10]\n\n  # several \"node\" statements\n  node [shape = circle,\n        fixedsize = true,\n        width = 0.9] // sets as circles\n  N[label = \"Nature\"];\n  MF[label = \"Mechanic\"];\n  MS[label = \"Mechanic\"];\n  RFF[label = \"Result\"];\n  RFS[label = \"Result\"];\n  RSF[label = \"Result\"];\n  RSS[label = \"Result\"]\n\n  # several \"edge\" statements\n  N -> MF[label=\"F: .3\"]\n  N -> MS[label=\"G: .7\"]\n  MF -> RFF[label=\"F: .9\"]\n  MF -> RFS[label=\"G: .1\"]\n  MS -> RSF[label=\"F: .2\"]\n  MS -> RSS[label=\"G: .8\"]\n  \n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
]


.right-column[
`$$\begin{align}
&amp; P(F|MF) \\
=&amp; \frac{P(MF|F)P(F)}{P(MF|F)P(F) + P(MF|\tilde F)P(\tilde F)} \\
=&amp; \frac{.9 * .3}{.9 * .3 + .2*.7} = .659.
\end{align}$$`
]

---

e.g.2: Three types of coins: C1 2 heads, C2 2 tails, C3 1 head 1 tail. Randomly picking one, if knowing you will get heads, what's the probability to have two heads?

???

`$$\begin{align}
&amp; P(2H|H) \\
=&amp; \frac{P(H|2H)P(2H)}{P(H|2H)P(2H) + P(H|2T)P(T) + P(H|Fair)P(Fair)} \\
=&amp; \frac{1 * 1/3}{1 * 1/3 + 0 * 1/3 + 1/2 * 1/3} = 2/3.
\end{align}$$`


<div id="htmlwidget-e5eef16853e540d8f4ad" style="width:504px;height:504px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5eef16853e540d8f4ad">{"x":{"diagram":"\ndigraph usedCar {\n\n  # a \"graph\" statement\n  graph [overlap = true, fontsize = 10]\n\n  # several \"node\" statements\n  node [shape = circle,\n        fixedsize = true,\n        width = 0.9] // sets as circles\n  N[label = \"Nature\"];\n  MH[label = \"2-Head Coin\"];\n  MT[label = \"2-Tail Coin\"];\n  MF[label = \"Fair Coin\"];\n  RHH[label = \"Head\"];\n  RHT[label = \"Tail\"];\n  RTH[label = \"Head\"];\n  RTT[label = \"Tail\"];\n  RFH[label = \"Head\"];\n  RFT[label = \"Tail\"];\n\n  # several \"edge\" statements\n  N -> MH[label=\".3\"]\n  N -> MT[label=\".3\"]\n  N -> MF[label=\".3\"]\n  MH -> RHH[label=\"1\"]\n  MH -> RHT[label=\"0\"]\n  MT -> RTH[label=\"1\"]\n  MT -> RTT[label=\"0\"]\n  MF -> RFH[label=\"1\"]\n  MF -> RFT[label=\"0\"]\n  \n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>



---

* Pro:
    1. Models vary across unit/group;
    1. Missing value issue
    1. Model with latent variables
    
--

* Cons: Deciding prior


---

* vs. Frequentist
    1. repeated sample and sampel distribution: when the population data are collected, the repeat-sample makes no sense.
    1. Future event: it is impossible to have repeat samples for future
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="../../../libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
